<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>X'—ã –≤ –†–∞–∫–µ—Ç–∫–µ</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:Arial,Helvetica,sans-serif; }
    body { background:#111; color:#fff; min-height:100vh; display:flex; flex-direction:column; }
    .container { flex:1; padding:15px; overflow-y:auto; }
    h1 { text-align:center; margin-bottom:20px; font-size:1.5em; }
    .tab-bar { display:flex; justify-content:space-around; background:#222; padding:10px 0; position:fixed; bottom:0; left:0; right:0; border-top:1px solid #333; }
    .tab-btn { background:none; border:none; color:#aaa; font-size:0.9em; padding:8px; flex:1; text-align:center; cursor:pointer; }
    .tab-btn.active { color:#0f0; }
    .tab { display:none; }
    .tab.active { display:block; }
    .mode-btn { background:#333; border-radius:8px; padding:12px; margin:10px 0; text-align:center; cursor:pointer; }
    .mode-btn.easy { border:2px solid #0f0; }
    .mode-btn.medium { border:2px solid #ff0; }
    .mode-btn.hard { border:2px solid #f00; }
    .mode-btn.impossible { border:2px solid #90f; }
    .mode-desc { font-size:0.85em; color:#ccc; margin-top:5px; }
    .profile-grid { display:grid; grid-template-columns:auto 1fr; gap:8px; font-size:0.9em; }
    .profile-label { color:#aaa; }
    .avatar { width:80px; height:80px; border-radius:50%; margin:0 auto 15px; background:#444; display:flex; align-items:center; justify-content:center; font-size:2em; }
    .sub-tabs { display:flex; gap:10px; margin-bottom:15px; }
    .sub-tab-btn { flex:1; padding:10px; background:#222; border:none; color:#fff; border-radius:6px; cursor:pointer; }
    .sub-tab-btn.active { background:#0f0; color:#000; }
    .sub-content { display:none; }
    .sub-content.active { display:block; }
    .key-input { width:100%; padding:10px; background:#222; border:1px solid #444; color:#fff; border-radius:6px; margin:10px 0; }
    .btn { background:#0f0; color:#000; border:none; padding:10px; border-radius:6px; width:100%; cursor:pointer; font-weight:bold; }
    .tariff { background:#222; border-radius:8px; padding:12px; margin:10px 0; }
    .tariff.green { border-left:5px solid #0f0; }
    .tariff.yellow { border-left:5px solid #ff0; }
    .tariff.red { border-left:5px solid #f00; }
    .tariff.purple { border-left:5px solid #90f; }
    .duration { background:#333; border-radius:6px; padding:10px; margin:8px 0; font-size:0.9em; }
    .duration-btn { background:#0a0; color:#fff; padding:6px 12px; border-radius:4px; margin-top:6px; display:inline-block; cursor:pointer; }
    .error { color:#f66; text-align:center; margin:15px 0; }
    .admin-panel { background:#333; padding:15px; border-radius:8px; margin-top:20px; display:none; }
    .admin-panel input, .admin-panel select, .admin-panel button { margin:5px 0; width:100%; padding:8px; }
    #prediction-result { text-align:center; font-size:1.4em; margin:20px 0; }
    .start-btn { background:#0f0; color:#000; padding:12px; border-radius:8px; text-align:center; cursor:pointer; font-weight:bold; }
  </style>
</head>
<body>
  <div class="container" id="app">
    <h1>üöÄ X'—ã –≤ –†–∞–∫–µ—Ç–∫–µ</h1>

    <!-- –í–∫–ª–∞–¥–∫–∞ –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã -->
    <div class="tab active" id="tab-coeff">
      <div class="mode-btn easy" onclick="selectMode('easy')">
        <div>–õ—ë–≥–∫–∏–π —Ä–µ–∂–∏–º</div>
        <div class="mode-desc">–ú–∞–ª–µ–Ω—å–∫–∏–µ, –Ω–æ —Ç–æ—á–Ω—ã–µ –∏–∫—Å—ã</div>
      </div>
      <div class="mode-btn medium" onclick="selectMode('medium')">
        <div>–°—Ä–µ–¥–Ω–∏–π —Ä–µ–∂–∏–º</div>
        <div class="mode-desc">–°—Ä–µ–¥–Ω–∏–µ –∏–∫—Å—ã, –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</div>
      </div>
      <div class="mode-btn hard" onclick="selectMode('hard')">
        <div>–•–∞—Ä–¥ —Ä–µ–∂–∏–º</div>
        <div class="mode-desc">–í—ã—Å–æ–∫–∏–µ –∏–∫—Å—ã, –±–æ–ª—å—à–æ–π —Ä–∏—Å–∫</div>
      </div>
      <div class="mode-btn impossible" onclick="selectMode('impossible')">
        <div>–ù–µ–≤–æ–∑–º–æ–∂–Ω—ã–π —Ä–µ–∂–∏–º</div>
        <div class="mode-desc">–û–≥—Ä–æ–º–Ω—ã–µ –∏–∫—Å—ã, –≥–∏–≥–∞–Ω—Ç—Å–∫–∏–π —Ä–∏—Å–∫ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</div>
      </div>
      <div id="prediction-result"></div>
      <div class="start-btn" onclick="startPrediction()">–ù–∞—á–∞—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ</div>
      <div id="coeff-error" class="error"></div>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∞ –ü—Ä–æ—Ñ–∏–ª—å -->
    <div class="tab" id="tab-profile">
      <div class="avatar" id="user-avatar">?</div>
      <div class="profile-grid">
        <div class="profile-label">ID:</div><div id="user-id">-</div>
        <div class="profile-label">Username:</div><div id="user-username">-</div>
        <div class="profile-label">Display Name:</div><div id="user-display">-</div>
        <div class="profile-label">–°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏:</div><div id="user-substatus">–ù–µ–∞–∫—Ç–∏–≤–Ω–∞</div>
      </div>
      <div id="admin-panel" class="admin-panel">
        <h3>–ê–¥–º–∏–Ω–∫–∞ (—Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–µ–π)</h3>
        <select id="admin-tariff">
          <option value="green">–ó–µ–ª—ë–Ω—ã–π</option>
          <option value="yellow">–ñ—ë–ª—Ç—ã–π</option>
          <option value="red">–ö—Ä–∞—Å–Ω—ã–π</option>
          <option value="purple">–§–∏–æ–ª–µ—Ç–æ–≤—ã–π</option>
        </select>
        <select id="admin-duration">
          <option value="3d">3 –¥–Ω—è</option>
          <option value="10d">10 –¥–Ω–µ–π</option>
          <option value="1m">1 –º–µ—Å—è—Ü</option>
          <option value="forever">–ù–∞–≤—Å–µ–≥–¥–∞</option>
        </select>
        <button onclick="generateKey()">–°–æ–∑–¥–∞—Ç—å –∫–ª—é—á</button>
        <input type="text" id="generated-key" placeholder="–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á" readonly />
      </div>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∞ –ü–æ–¥–ø–∏—Å–∫–∞ -->
    <div class="tab" id="tab-sub">
      <div class="sub-tabs">
        <button class="sub-tab-btn active" onclick="openSubTab('activate')">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á</button>
        <button class="sub-tab-btn" onclick="openSubTab('buy')">–ü–æ–∫—É–ø–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏</button>
        <button class="sub-tab-btn" onclick="openSubTab('rates')">–¢–∞—Ä–∏—Ñ—ã</button>
      </div>

      <div class="sub-content active" id="sub-activate">
        <input type="text" class="key-input" id="key-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á" />
        <button class="btn" onclick="activateKey()">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
        <div id="activate-error" class="error"></div>
      </div>

      <div class="sub-content" id="sub-buy">
        <p>–î–ª—è –ø–æ–∫—É–ø–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å <a href="https://t.me/Xanezy" target="_blank">@Xanezy</a></p>
      </div>

      <div class="sub-content" id="sub-rates">
        <!-- –ó–µ–ª—ë–Ω—ã–π -->
        <div class="tariff green">
          <h3>–ó–µ–ª—ë–Ω—ã–π —Ç–∞—Ä–∏—Ñ</h3>
          <p>–î–æ—Å—Ç—É–ø –∫ —Å—Ä–µ–¥–Ω–µ–º—É –∏ –•–∞—Ä–¥ —Ä–µ–∂–∏–º–∞–º. –ë–æ–ª–µ–µ –Ω–∏–∑–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –∏–∫—Å–æ–≤ —á–µ–º –Ω–∞ –≤—ã—Å–æ–∫–∏—Ö —Ç–∞—Ä–∏—Ñ–∞—Ö.</p>
          <p><strong>–¢–æ—á–Ω–æ—Å—Ç—å –∏–∫—Å–æ–≤: 70-75%</strong></p>
          <div class="duration">3 –¥–Ω—è ‚Äî –•–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å —Å–æ—Ñ—Ç –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É? –≠—Ç–æ—Ç —Ç–∞—Ä–∏—Ñ —Ç–æ—á–Ω–æ –≤–∞–º –ø–æ–¥—Ö–æ–¥–∏—Ç! –í—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –ø—Ä–æ–∞–ø–≥—Ä–µ–π–¥–∏—Ç—å—Å—è –¥–æ –Ω–æ–≤–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞.<br><span class="duration-btn" onclick="buyTariff('green','3d')">–ö—É–ø–∏—Ç—å</span></div>
          <div class="duration">10 –¥–Ω–µ–π ‚Äî –ü–æ–Ω—Ä–∞–≤–∏–ª—Å—è —Å–æ—Ñ—Ç? –£–¥–ª–∏–Ω–Ω–∏—Ç–µ —Å–≤–æ—é –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ 10 –¥–Ω–µ–π!<br><span class="duration-btn" onclick="buyTariff('green','10d')">–ö—É–ø–∏—Ç—å</span></div>
          <div class="duration">1 –º–µ—Å—è—Ü ‚Äî –ö—É–ø–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ 1 –º–µ—Å—è—Ü –∏ –Ω–µ –≤–æ–ª–Ω—É–π—Ç–µ—Å—å –æ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–∫—É–ø–∫–∞—Ö –∫–∞–∂–¥—ã–µ 10 –¥–Ω–µ–π!<br><span class="duration-btn" onclick="buyTariff('green','1m')">–ö—É–ø–∏—Ç—å</span></div>
          <div class="duration">–ù–∞–≤—Å–µ–≥–¥–∞ ‚Äî –£–≤–µ—Ä–µ–Ω—ã –≤ —Ç–æ—á–Ω–æ—Å—Ç–∏ —Å–æ—Ñ—Ç–∞? –ü–æ–∫—É–ø–∞–π—Ç–µ –µ–≥–æ –ª–∞–π—Ñ-—Ç–∞–π–º –≤–µ—Ä—Å–∏—é!<br><span class="duration-btn" onclick="buyTariff('green','forever')">–ö—É–ø–∏—Ç—å</span></div>
        </div>

        <!-- –ñ—ë–ª—Ç—ã–π -->
        <div class="tariff yellow">
          <h3>–ñ—ë–ª—Ç—ã–π —Ç–∞—Ä–∏—Ñ</h3>
          <p>–î–æ—Å—Ç—É–ø –∫ –õ—ë–≥–∫–æ–º—É, –°—Ä–µ–¥–Ω–µ–º—É —Ä–µ–∂–∏–º–∞–º! –°—Ä–µ–¥–Ω—è—è —Ç–æ—á–Ω–æ—Å—Ç—å –∏–∫—Å–æ–≤, –≤—ã—à–µ —á–µ–º –Ω–∞ –∑–µ–ª—ë–Ω–æ–º!</p>
          <p><strong>–¢–æ—á–Ω–æ—Å—Ç—å –∏–∫—Å–æ–≤: 75-85%</strong></p>
          <div class="duration">3 –¥–Ω—è<br><span class="duration-btn" onclick="buyTariff('yellow','3d')">–ö—É–ø–∏—Ç—å</span></div>
          <div class="duration">10 –¥–Ω–µ–π<br><span class="duration-btn" onclick="buyTariff('yellow','10d')">–ö—É–ø–∏—Ç—å</span></div>
          <div class="duration">1 –º–µ—Å—è—Ü<br><span class="duration-btn" onclick="buyTariff('yellow','1m')">–ö—É–ø–∏—Ç—å</span></div>
          <div class="duration">–ù–∞–≤—Å–µ–≥–¥–∞<br><span class="duration-btn" onclick="buyTariff('yellow','forever')">–ö—É–ø–∏—Ç—å</span></div>
        </div>

        <!-- –ö—Ä–∞—Å–Ω—ã–π -->
        <div class="tariff red">
          <h3>–ö—Ä–∞—Å–Ω—ã–π —Ç–∞—Ä–∏—Ñ</h3>
          <p>–î–æ—Å—Ç—É–ø –∫ –õ—ë–≥–∫–æ–º—É, –°—Ä–µ–¥–Ω–µ–º—É, –•–∞—Ä–¥ —Ä–µ–∂–∏–º–∞–º! –ü–æ—á—Ç–∏ —Å–∞–º–∞—è –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –∏–∫—Å–æ–≤!</p>
          <p><strong>–¢–æ—á–Ω–æ—Å—Ç—å –∏–∫—Å–æ–≤: 85-90%</strong></p>
          <div class="duration">3 –¥–Ω—è<br><span class="duration-btn" onclick="buyTariff('red','3d')">–ö—É–ø–∏—Ç—å</span></div>
          <div class="duration">10 –¥–Ω–µ–π<br><span class="duration-btn" onclick="buyTariff('red','10d')">–ö—É–ø–∏—Ç—å</span></div>
          <div class="duration">1 –º–µ—Å—è—Ü<br><span class="duration-btn" onclick="buyTariff('red','1m')">–ö—É–ø–∏—Ç—å</span></div>
          <div class="duration">–ù–∞–≤—Å–µ–≥–¥–∞<br><span class="duration-btn" onclick="buyTariff('red','forever')">–ö—É–ø–∏—Ç—å</span></div>
        </div>

        <!-- –§–∏–æ–ª–µ—Ç–æ–≤—ã–π -->
        <div class="tariff purple">
          <h3>–§–∏–æ–ª–µ—Ç–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ</h3>
          <p>–î–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ä–µ–∂–∏–º–∞–º, —Ç–æ—á–Ω–æ—Å—Ç—å –∏–∫—Å–æ–≤ —Å–∞–º–∞—è –≤—ã—Å–æ–∫–∞—è –∏–∑ –≤—Å–µ—Ö —Ç–∞—Ä–∏—Ñ–æ–≤!</p>
          <p><strong>–¢–æ—á–Ω–æ—Å—Ç—å –∏–∫—Å–æ–≤: 90-95%</strong></p>
          <div class="duration">3 –¥–Ω—è<br><span class="duration-btn" onclick="buyTariff('purple','3d')">–ö—É–ø–∏—Ç—å</span></div>
          <div class="duration">10 –¥–Ω–µ–π<br><span class="duration-btn" onclick="buyTariff('purple','10d')">–ö—É–ø–∏—Ç—å</span></div>
          <div class="duration">1 –º–µ—Å—è—Ü<br><span class="duration-btn" onclick="buyTariff('purple','1m')">–ö—É–ø–∏—Ç—å</span></div>
          <div class="duration">–ù–∞–≤—Å–µ–≥–¥–∞<br><span class="duration-btn" onclick="buyTariff('purple','forever')">–ö—É–ø–∏—Ç—å</span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å -->
  <div class="tab-bar">
    <button class="tab-btn active" onclick="openTab('tab-coeff')">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã</button>
    <button class="tab-btn" onclick="openTab('tab-profile')">–ü—Ä–æ—Ñ–∏–ª—å</button>
    <button class="tab-btn" onclick="openTab('tab-sub')">–ü–æ–¥–ø–∏—Å–∫–∞</button>
  </div>

  <script>
    const ADMIN_ID = 8223197188;
    let user = {};
    let subscription = { active: false, tariff: null, until: null, modes: [] };
    let selectedMode = null;
    const keysDB = []; // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –±–∞–∑–∞ –∫–ª—é—á–µ–π (–ø–æ–∫–∞ –ø—É—Å—Ç–æ, –∞–¥–º–∏–Ω –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç)

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
    Telegram.WebApp.ready();
    Telegram.WebApp.expand();

    // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    function initUser() {
      user = Telegram.WebApp.initDataUnsafe.user || {};
      document.getElementById('user-id').textContent = user.id || '-';
      document.getElementById('user-username').textContent = user.username ? '@'+user.username : '-';
      document.getElementById('user-display').textContent = user.first_name + (user.last_name?' '+user.last_name:'') || '-';
      const avatar = document.getElementById('user-avatar');
      if (user.photo_url) {
        avatar.style.backgroundImage = `url(${user.photo_url})`;
        avatar.style.backgroundSize = 'cover';
      } else {
        avatar.textContent = (user.first_name?.[0] || '?').toUpperCase();
      }
      updateSubStatus();
      if (user.id == ADMIN_ID) {
        document.getElementById('admin-panel').style.display = 'block';
      }
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏
    function updateSubStatus() {
      const el = document.getElementById('user-substatus');
      if (!subscription.active) {
        el.textContent = '–ù–µ–∞–∫—Ç–∏–≤–Ω–∞';
        el.style.color = '#f66';
      } else {
        const daysLeft = subscription.until === 'forever' ? '–ù–∞–≤—Å–µ–≥–¥–∞' : Math.ceil((new Date(subscription.until) - Date.now()) / 86400000) + ' –¥–Ω.';
        el.textContent = `${subscription.tariff.toUpperCase()} ‚Äî ${daysLeft}`;
        el.style.color = {green:'#0f0',yellow:'#ff0',red:'#f00',purple:'#90f'}[subscription.tariff];
      }
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–∂–∏–º—É
    function canAccessMode(mode) {
      if (!subscription.active) return false;
      const access = {
        green: ['medium','hard'],
        yellow: ['easy','medium'],
        red: ['easy','medium','hard'],
        purple: ['easy','medium','hard','impossible']
      };
      return access[subscription.tariff]?.includes(mode) || false;
    }

    // –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞
    function selectMode(mode) {
      if (!canAccessMode(mode)) {
        document.getElementById('coeff-error').textContent = '–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–º—É —Ä–µ–∂–∏–º—É!';
        return;
      }
      selectedMode = mode;
      document.querySelectorAll('.mode-btn').forEach(b=>b.style.opacity=0.6);
      document.querySelector(`.mode-btn.${mode}`).style.opacity=1;
      document.getElementById('coeff-error').textContent = '';
    }

    // –ó–∞–ø—É—Å–∫ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è
    function startPrediction() {
      const err = document.getElementById('coeff-error');
      err.textContent = '';
      if (!subscription.active) {
        err.textContent = '–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏!';
        return;
      }
      if (!selectedMode) {
        err.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º!';
        return;
      }
      if (!canAccessMode(selectedMode)) {
        err.textContent = '–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–º—É —Ä–µ–∂–∏–º—É!';
        return;
      }

      // –ò–º–∏—Ç–∞—Ü–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è
      const ranges = { easy:[1.1,1.5], medium:[1.5,3], hard:[3,10], impossible:[10,100] };
      const [min,max] = ranges[selectedMode];
      const x = (Math.random()*(max-min)+min).toFixed(2);
      document.getElementById('prediction-result').textContent = `üöÄ x${x}`;
    }

    // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–ª—é—á–∞
    function activateKey() {
      const key = document.getElementById('key-input').value.trim();
      const err = document.getElementById('activate-error');
      err.textContent = '';
      const found = keysDB.find(k=>k.key===key && !k.used);
      if (!found) {
        err.textContent = '–ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á!';
        return;
      }
      found.used = true;
      subscription.active = true;
      subscription.tariff = found.tariff;
      subscription.until = found.until;
      subscription.modes = getModesForTariff(found.tariff);
      updateSubStatus();
      err.textContent = '–ö–ª—é—á –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!';
      err.style.color = '#0f0';
    }

    function getModesForTariff(t) {
      const m = {green:['medium','hard'],yellow:['easy','medium'],red:['easy','medium','hard'],purple:['easy','medium','hard','impossible']};
      return m[t] || [];
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–∞ (–∞–¥–º–∏–Ω)
    function generateKey() {
      if (user.id != ADMIN_ID) return;
      const tariff = document.getElementById('admin-tariff').value;
      const dur = document.getElementById('admin-duration').value;
      const days = { '3d':3, '10d':10, '1m':30, forever:null };
      const until = days[dur] ? new Date(Date.now() + days[dur]*86400000).toISOString() : 'forever';
      const key = btoa(Math.random()).slice(0,12).toUpperCase();
      keysDB.push({ key, tariff, until, used:false });
      document.getElementById('generated-key').value = key;
    }

    // –ü–æ–∫—É–ø–∫–∞ —Ç–∞—Ä–∏—Ñ–∞
    function buyTariff(tariff, duration) {
      Telegram.WebApp.openLink('https://t.me/Xanezy');
    }

    // –ù–∞–≤–∏–≥–∞—Ü–∏—è
    function openTab(tabId) {
      document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
      document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
      document.querySelector(`.tab-btn[onclick="openTab('${tabId}')"]`).classList.add('active');
    }

    function openSubTab(subId) {
      document.querySelectorAll('.sub-content').forEach(c=>c.classList.remove('active'));
      document.querySelectorAll('.sub-tab-btn').forEach(b=>b.classList.remove('active'));
      document.getElementById('sub-'+subId).classList.add('active');
      document.querySelector(`.sub-tab-btn[onclick="openSubTab('${subId}')"]`).classList.add('active');
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    window.onload = () => {
      initUser();
    };
  </script>
</body>
</html>
