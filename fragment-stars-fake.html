<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Liquid Glass Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <!-- Подключаем твой шрифт dityinfant -->
    <style>
        @font-face {
            font-family: 'Dity Infant';
            src: url('./dityinfant-Regular.otf') format('opentype');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body, html {
            height: 100dvh;
            overflow: hidden;
            background: #0a0a0c;
            color: #e8e8e8;
            font-family: 'Dity Infant', -apple-system, system-ui, sans-serif;
            letter-spacing: 0.5px;
        }

        /* Пульсирующий свет */
        .bg-lights { position: fixed; inset: 0; pointer-events: none; z-index: 0; }
        .light {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(160, 190, 255, 0.22) 0%, transparent 70%);
            filter: blur(90px);
            animation: pulse 12s ease-in-out infinite;
        }
        .light:nth-child(1) { width: 700px; height: 700px; top: -250px; left: -200px; animation-delay: 0s; }
        .light:nth-child(2) { width: 900px; height: 900px; top: 20%; right: -300px; animation-delay: 4s; }
        .light:nth-child(3) { width: 600px; height: 600px; bottom: -200px; left: 50%; animation-delay: 7s; }
        .light:nth-child(4) { width: 800px; height: 800px; top: 45%; left: 45%; animation-delay: 2s; opacity: 0.5; }

        @keyframes pulse {
            0%, 100% { opacity: 0.25; transform: scale(0.85); }
            50% { opacity: 0.65; transform: scale(1.25); }
        }

        .container {
            position: relative;
            z-index: 1;
            height: 100dvh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .profile-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(28px);
            -webkit-backdrop-filter: blur(28px);
            border: 1px solid rgba(255, 255, 255, 0.14);
            border-radius: 34px;
            padding: 50px 40px 40px;
            text-align: center;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            max-width: 340px;
            width: 92%;
        }

        .avatar {
            width: 140px; height: 140px;
            border-radius: 50%;
            overflow: hidden;
            margin: 0 auto 28px;
            border: 5px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 40px rgba(180, 200, 255, 0.3);
        }
        .avatar img { width: 100%; height: 100%; object-fit: cover; }

        .username {
            font-size: 32px;
            font-weight: 400;
            letter-spacing: 4px;
            margin-bottom: 10px;
        }

        .first-entry {
            font-size: 16px;
            opacity: 0.75;
        }

        /* Адаптивная нижняя панель */
        .bottom-nav {
            position: fixed;
            bottom: max(20px, env(safe-area-inset-bottom, 20px));
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.16);
            border-radius: 60px;
            padding: clamp(14px, 3vw, 20px) clamp(30px, 10vw, 56px);
            display: flex;
            gap: clamp(30px, 12vw, 64px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
            z-index: 10;
            max-width: 95vw;
        }

        .nav-item {
            color: #999;
            text-align: center;
            transition: color 0.3s ease;
            user-select: none;
        }
        .nav-item.active { color: #ffffff; }
        .nav-item:hover { color: #ddd; }

        .nav-icon {
            width: clamp(26px, 6vw, 34px);
            height: clamp(26px, 6vw, 34px);
            margin: 0 auto 6px;
        }

        .nav-label {
            font-size: clamp(11px, 3.2vw, 13px);
            font-weight: 500;
        }
    </style>
</head>
<body>

    <div class="bg-lights">
        <div class="light"></div>
        <div class="light"></div>
        <div class="light"></div>
        <div class="light"></div>
    </div>

    <div class="container">
        <div class="profile-card">
            <div class="avatar">
                <img id="user-avatar" src="" alt="Avatar">
            </div>
            <div class="username" id="user-name">// @loading //</div>
            <div class="first-entry" id="first-entry">Первый вход: загружается…</div>
        </div>
    </div>

    <!-- Нижняя панель с новыми иконками -->
    <div class="bottom-nav">
        <div class="nav-item active">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
            </svg>
            <div class="nav-label">Главная</div>
        </div>

        <div class="nav-item">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/>
            </svg>
            <div class="nav-label">Инфо</div>
        </div>

        <div class="nav-item">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M7 18c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.76 1.38-.24 3.15 1.14 3.95C7.66 18.66 9.38 19 11.1 19h12v-2H11.1l.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16h-2v-2h2v2z"/>
            </svg>
            <div class="nav-label">Подписка</div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (window.Telegram?.WebApp) {
                Telegram.WebApp.ready();
                Telegram.WebApp.expand();
            }

            const user = window.Telegram?.WebApp?.initDataUnsafe?.user || null;
            const avatarEl = document.getElementById('user-avatar');
            const nameEl = document.getElementById('user-name');

            let displayName = '// @unknown //';
            let photoUrl = '';

            if (user) {
                displayName = user.username ? `// @${user.username} //` : `// ${user.first_name || 'User'} ${user.last_name || ''} //`.trim();

                if (user.photo_url) {
                    photoUrl = user.photo_url;
                }
            } else {
                displayName = '// @XaneZy //';
            }

            if (!photoUrl) {
                photoUrl = 'https://i.ibb.co/0jKX7YJ/sunflower-avatar.jpg';
            }

            nameEl.textContent = displayName;
            avatarEl.src = photoUrl;

            // Первый вход
            let firstEntry = localStorage.getItem('firstEntry');
            if (!firstEntry) {
                const n = new Date();
                firstEntry = `${n.getFullYear()}.${String(n.getMonth()+1).padStart(2,'0')}.${String(n.getDate()).padStart(2,'0')}, ${String(n.getHours()).padStart(2,'0')}:${String(n.getMinutes()).padStart(2,'0')}:${String(n.getSeconds()).padStart(2,'0')}`;
                localStorage.setItem('firstEntry', firstEntry);
            }
            document.getElementById('first-entry').textContent = `Первый вход: ${firstEntry}`;
        });
    </script>
</body>
</html>
